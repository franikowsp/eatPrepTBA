---
title: "eatPrepTBA"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{eatPrepTBA}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
originalTestMode <- getOption("eatPrepTBA.test_mode")
options("eatPrepTBA.test_mode" = TRUE)

knitr::opts_chunk$set(
  collapse = TRUE, 
  comment = "#>"
)
```

## Preparations

```{r setup}
library(eatPrepTBA)
```

## Login to the IQB Testcenter

To log in to the IQB Testcenter, you can call the function `createLogin()`. You will be asked to provide your user name and your password (either in the console or a dialog when using RStudio). The function invisibly provides an access token, i.e., something like a key to all of your studies, that can be used on other function calls to retrieve data from the IQB Testcenter. To use this key in other functions, it should be assigned to an `R` object, e.g., `login`.

```{r create-login}
login <- createLogin()
```

For the purpose of following along this documentation, you can use the following credentials when asked:
- username: `eatPrepTBA`
- password: `eatPrepTBA`

The inital call of `createLogin()` (and calling the `login` object) returns a list of workspaces that can be accessed with your credentials.

## Access a workspace

As can be seen, we have access to a workspace labelled as *eatPrepTBA Documentation* that is associated with a unique id, i.e., 134.

To access this workspace, you can either provide the label of the workspace or its id (or both -- in this case, they have to match, of course). This workspace should again be assigned to an object, i.e., `workspace`, as it carries the token generated by the `createLogin()` and information about the path to find the associated files.

```{r access-workspace}
workspace <- accessWorkspace(login = login, label = "eatPrepTBA Documentation")
# workspace <- accessWorkspace(login = login, id = 134)
```

This information can be used to access the files (i.e., testtakers, booklets, and units) and results (i.e., responses and log data).

## Retrieve files from the workspace

Using the output of `accessWorkspace()`, one can list (`list*()` family) the different types of files. These files can also be retrieved as `R` objects, i.e., `tibble`s (`get*()` family).

### Testtakers

These functions allow to list all testtaker files (`listTesttakers()`) and return the associated testtaker information (`getTesttakers()`), i.e., a list of all logins for potential testtakers.

```{r booklets}
listTesttakers(workspace = workspace)
getTesttakers(workspace = workspace)
```

### Booklets

These functions list all booklet files (`listBooklets()`) and return the associated designs (`getBooklets()`).

```{r testtakers}
listBooklets(workspace = workspace)
getBooklets(workspace = workspace)
```

### Units

These functions list all unit files (`listUnits()`) and return the associated unit meta data (`getUnits()`), i.e., the item information and the coding scheme used for scoring the responses.

```{r units}
listUnits(workspace = workspace)
getUnits(workspace = workspace)
```

```{r, include = FALSE}
options("eatPrepTBA.test_mode" = originalTestMode)
```

